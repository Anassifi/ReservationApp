--
-- PostgreSQL database dump
--

-- Dumped from database version 13.2
-- Dumped by pg_dump version 13.2

-- Started on 2021-03-10 11:31:45

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 203 (class 1259 OID 24681)
-- Name: LIMIT; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."LIMIT" (
    id_limit integer NOT NULL,
    id_reservation integer,
    numbremax numeric NOT NULL,
    datelimit date NOT NULL,
    typereservation text NOT NULL
);


ALTER TABLE public."LIMIT" OWNER TO postgres;

--
-- TOC entry 200 (class 1259 OID 24608)
-- Name: USER; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."USER" (
    id_user integer NOT NULL,
    firstname text NOT NULL,
    lastname text NOT NULL,
    email text NOT NULL,
    password text NOT NULL,
    phone text NOT NULL
);


ALTER TABLE public."USER" OWNER TO postgres;

--
-- TOC entry 202 (class 1259 OID 24668)
-- Name: reservation; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reservation (
    id_reservation integer NOT NULL,
    id_user integer NOT NULL,
    id_limit integer NOT NULL,
    datereservation date NOT NULL,
    confirmation boolean
);


ALTER TABLE public.reservation OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 24617)
-- Name: role; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.role (
    id_role integer NOT NULL,
    id_user integer,
    rolename text NOT NULL
);


ALTER TABLE public.role OWNER TO postgres;

--
-- TOC entry 3016 (class 0 OID 24681)
-- Dependencies: 203
-- Data for Name: LIMIT; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."LIMIT" (id_limit, id_reservation, numbremax, datelimit, typereservation) FROM stdin;
\.


--
-- TOC entry 3013 (class 0 OID 24608)
-- Dependencies: 200
-- Data for Name: USER; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."USER" (id_user, firstname, lastname, email, password, phone) FROM stdin;
\.


--
-- TOC entry 3015 (class 0 OID 24668)
-- Dependencies: 202
-- Data for Name: reservation; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reservation (id_reservation, id_user, id_limit, datereservation, confirmation) FROM stdin;
\.


--
-- TOC entry 3014 (class 0 OID 24617)
-- Dependencies: 201
-- Data for Name: role; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.role (id_role, id_user, rolename) FROM stdin;
\.


--
-- TOC entry 2878 (class 2606 OID 24688)
-- Name: LIMIT pk_limit; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."LIMIT"
    ADD CONSTRAINT pk_limit PRIMARY KEY (id_limit);


--
-- TOC entry 2873 (class 2606 OID 24672)
-- Name: reservation pk_reservation; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT pk_reservation PRIMARY KEY (id_reservation);


--
-- TOC entry 2868 (class 2606 OID 24624)
-- Name: role pk_role; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT pk_role PRIMARY KEY (id_role);


--
-- TOC entry 2864 (class 2606 OID 24615)
-- Name: USER pk_user; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."USER"
    ADD CONSTRAINT pk_user PRIMARY KEY (id_user);


--
-- TOC entry 2870 (class 1259 OID 24674)
-- Name: demande_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX demande_fk ON public.reservation USING btree (id_user);


--
-- TOC entry 2871 (class 1259 OID 24675)
-- Name: fixe2_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fixe2_fk ON public.reservation USING btree (id_limit);


--
-- TOC entry 2875 (class 1259 OID 24690)
-- Name: fixe_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX fixe_fk ON public."LIMIT" USING btree (id_reservation);


--
-- TOC entry 2876 (class 1259 OID 24689)
-- Name: limit_pk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX limit_pk ON public."LIMIT" USING btree (id_limit);


--
-- TOC entry 2866 (class 1259 OID 24626)
-- Name: permission_fk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX permission_fk ON public.role USING btree (id_user);


--
-- TOC entry 2874 (class 1259 OID 24673)
-- Name: reservation_pk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX reservation_pk ON public.reservation USING btree (id_reservation);


--
-- TOC entry 2869 (class 1259 OID 24625)
-- Name: role_pk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX role_pk ON public.role USING btree (id_role);


--
-- TOC entry 2865 (class 1259 OID 24616)
-- Name: user_pk; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX user_pk ON public."USER" USING btree (id_user);


--
-- TOC entry 2882 (class 2606 OID 24691)
-- Name: LIMIT fk_limit_fixe_reservat; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."LIMIT"
    ADD CONSTRAINT fk_limit_fixe_reservat FOREIGN KEY (id_reservation) REFERENCES public.reservation(id_reservation) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2880 (class 2606 OID 24676)
-- Name: reservation fk_reservat_demande_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fk_reservat_demande_user FOREIGN KEY (id_user) REFERENCES public."USER"(id_user) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2881 (class 2606 OID 24696)
-- Name: reservation fk_reservat_fixe2_limit; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fk_reservat_fixe2_limit FOREIGN KEY (id_limit) REFERENCES public."LIMIT"(id_limit) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2879 (class 2606 OID 24627)
-- Name: role fk_role_permissio_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role
    ADD CONSTRAINT fk_role_permissio_user FOREIGN KEY (id_user) REFERENCES public."USER"(id_user) ON UPDATE CASCADE ON DELETE CASCADE;


-- Completed on 2021-03-10 11:31:46

--
-- PostgreSQL database dump complete
--

